# Сервис "Куда пойти"

Интерактивная карта Москвы для поиска мест активного отдыха с подробными описаниями и комментариями. 

[Ссылка](http://iadmit47.pythonanywhere.com/) на рабочую версию сайта.

![image](https://user-images.githubusercontent.com/67222917/232372815-357224c2-cac0-46bc-aea2-d3beb217f8eb.png)

## Запуск

Для запуска у вас уже должен быть установлен Python 3.

1. Скачайте код
2. Установите зависимости командой `pip install -r requirements.txt`
3. Настройте переменные окружения:

Часть настроек проекта берётся из переменных окружения. Чтобы их определить, создайте файл `.env` рядом с `manage.py` и запишите туда данные в таком формате: `ПЕРЕМЕННАЯ=значение`.
Доступны следущие переменные:
- `DEBUG` — дебаг-режим. Поставьте `True`, чтобы увидеть отладочную информацию в случае ошибки. Выключается значением `False`.
- `SECRET_KEY` — секретный ключ проекта. Например: `erofheronoirenfoernfx49389f43xf3984xf9384`.
- `ALLOWED_HOSTS` — см [документацию Django](https://docs.djangoproject.com/en/3.1/ref/settings/#allowed-hosts).

4. Создайте базу данных SQLite командой `python3 manage.py migrate`
5. Запустите сервер командой `python3 manage.py runserver`

После этого переходите по ссылке [127.0.0.1:8000](http://127.0.0.1:8000), вы увидите главную страницу.

## Добавление новых локаций

Осуществляется через админ панель или из JSON файла через команду:
```
python3 manage.py load_place http://адрес/файла.json
```

Структура загружаемого файла должна выглядеть следующим образом:
```
{
    "title": "Экскурсионный проект «Крыши24.рф»",
    "imgs": [
        "https://kudago.com/media/images/place/d0/f6/d0f665a80d1d8d110826ba797569df02.jpg",
        "https://kudago.com/media/images/place/66/23/6623e6c8e93727c9b0bb198972d9e9fa.jpg",
        "https://kudago.com/media/images/place/64/82/64827b20010de8430bfc4fb14e786c19.jpg",
    ],
    "description_short": "Хотите увидеть Москву с высоты птичьего полёта?",
    "description_long": "<p>Проект «Крыши24.рф» проводит экскурсии ...</p>",
    "coordinates": {
        "lat": 55.753676,
        "lng": 37.64
    }
}
```


## Настройки сайта

Внизу справа на странице можно включить отладочный режим логгирования.

![image](https://user-images.githubusercontent.com/67222917/232372973-6eeb3c41-cfa7-491e-b9fa-516fd3ef9cf0.png)

Настройки сохраняются в Local Storage браузера и не пропадают после обновления страницы. Чтобы сбросить настройки, удалите ключи из Local Storage с помощью Chrome Dev Tools —> Вкладка Application —> Local Storage.

Если что-то работает не так, как ожидалось, то начните с включения отладочного режима логгирования.
